<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Url Shortener--</title>
    <%- include ('initHeader.ejs') %>
  </head>

  <body>
    <div>
      <span
        class="my-5 ml-5 mr-auto cursor-pointer inline-flex items-center m-2 px-3 py-1 bg-blue-200 hover:bg-blue-300 rounded-full text-sm font-semibold text-blue-600"
      >
        <svg
          class="w-4 h-4 fill-current"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 24 24"
        >
          <path d="M0 0h24v24H0V0z" fill="none" />
          <path
            d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm3.5-9c.83 0 1.5-.67 1.5-1.5S16.33 8 15.5 8 14 8.67 14 9.5s.67 1.5 1.5 1.5zm-7 0c.83 0 1.5-.67 1.5-1.5S9.33 8 8.5 8 7 8.67 7 9.5 7.67 11 8.5 11zm3.5 6.5c2.33 0 4.31-1.46 5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5z"
          />
        </svg>
        <a href="api/shorten-url"><span class="ml-1"> Add Urls </span></a>
      </span>
    </div>
    <div class="flex items-center justify-center">
      <div class="container p-8">
        <table
          class="w-full flex flex-row flex-no-wrap sm:bg-white rounded-lg overflow-hidden sm:shadow-lg my-1"
        >
          <thead class="text-white">
            <tr
              class="bg-blue-500 flex flex-col flex-no wrap sm:table-row rounded-l-lg sm:rounded-none mb-2 sm:mb-0"
            >
              <th class="p-3 text-center">original Url</th>
              <th class="p-3 text-center">Shortened Url</th>
              <th class="p-3 text-center">Url Visited</th>
              <th class="p-3 text-center">Tags</th>
            </tr>
          </thead>
          <tbody class="flex-1 sm:flex-none">
            <% urls.map((url)=>{ %>
            <tr class="flex flex-col flex-no wrap sm:table-row mb-2 sm:mb-0">
              <td
                class="border-grey-light border hover:bg-gray-100 p-3 text-center"
              >
                <%= url.originalUrl %>
              </td>
              <td
                class="border-grey-light border hover:bg-gray-100 p-3 truncate text-center"
              >
                <a
                  href="<%= url.originalUrl %>"
                  target="_blank"
                  class="text-center"
                  id="shortedUrl"
                  onclick="updateUrlVisits('<%=url.shortenedUrl%>')"
                  ><%= url.shortenedUrl %></a
                >
              </td>
              <td
                id="urlVisited"
                class="border-grey-light border hover:bg-gray-100 p-3 text-blue-400 hover:text-blue-500 hover:font-medium cursor-pointer text-center"
              >
                <%= url.urlVisited %>
              </td>
              <td
                id="keyword"
                class="border-grey-light border hover:bg-gray-100 p-3 text-blue-400 hover:text-blue-500 hover:font-medium cursor-pointer text-center"
              >
                <%= url.keyword ? url.keyword : '-' %>
              </td>
            </tr>

            <% }) %>
          </tbody>
        </table>
      </div>
    </div>
  </body>

  <style>
    html,
    body {
      height: 100%;
    }

    @media (min-width: 640px) {
      table {
        display: inline-table !important;
      }

      thead tr:not(:first-child) {
        display: none;
      }
    }

    td:not(:last-child) {
      border-bottom: 0;
    }

    th:not(:last-child) {
      border-bottom: 2px solid rgba(0, 0, 0, 0.1);
    }
  </style>
</html>
